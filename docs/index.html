<!doctype html><meta charset="utf-8"><title>VANTA RSS</title>
<style>body{font-family:system-ui;margin:24px}table{border-collapse:collapse;width:100%}th,td{border:1px solid #ddd;padding:8px}th{background:#f5f5f5}#bar{display:flex;gap:8px;align-items:center;margin:0 0 12px}</style>
<h1>VANTA RSS</h1>
<div id="bar">
  <button id="refresh">Refresh</button>
  <a id="hotlink" href="hot.json" target="_blank">hot.json</a>
  <a href="latest.json" target="_blank">latest.json</a>
  <a href="status.json" target="_blank">status.json</a>
</div>
<div id="status">Loading…</div>
<table id="tbl"><thead><tr><th>Published (UTC)</th><th>Source</th><th>Title</th><th>Link</th></tr></thead><tbody></tbody></table>
<script>
async function load(){
  const [d,s] = await Promise.all([
    fetch('latest.json',{cache:'no-store'}).then(r=>r.json()),
    fetch('status.json',{cache:'no-store'}).then(r=>r.json()).catch(()=>null)
  ]);
  document.getElementById('status').innerHTML = s
    ? `Run: <b>${s.started_utc}</b> → <b>${s.ended_utc}</b> • New: <b>${s.new_items_this_run}</b> • Total: <b>${s.total_in_latest}</b>`
    : `Items: ${d.length}`;
  const tb = document.querySelector('#tbl tbody'); tb.innerHTML='';
  d.forEach(o=>{
    const tr=document.createElement('tr');
    tr.innerHTML=`<td>${o.published_utc||''}</td><td>${o.source||''}</td><td>${(o.title||'').replace(/</g,'&lt;')}</td><td><a href="${o.url||'#'}" target="_blank">open</a></td>`;
    tb.appendChild(tr);
  });
}
document.getElementById('refresh').onclick=load; load();
</script>
